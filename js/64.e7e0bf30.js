"use strict";(self["webpackChunkping_fan_green"]=self["webpackChunkping_fan_green"]||[]).push([[64],{8557:function(t,e,i){function o(t){return{all:t=t||new Map,on:function(e,i){var o=t.get(e);o?o.push(i):t.set(e,[i])},off:function(e,i){var o=t.get(e);o&&(i?o.splice(o.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var o=t.get(e);o&&o.slice().map((function(t){t(i)})),(o=t.get("*"))&&o.slice().map((function(t){t(e,i)}))}}}i.d(e,{Z:function(){return r}});const s=o();var r=s},7824:function(t,e,i){var o=i(8557);e["Z"]={data(){return{loadItem:""}},methods:{addToCart(t,e=1){this.loadItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/pingfangreen/cart",{data:{product_id:t,qty:e}}).then((t=>{this.loadItem="",o.Z.emit("change-cart"),this.successFire(t.data.message)})).catch((t=>{this.loadItem="",this.failFire(t.response.data.message)}))}}}},2732:function(t,e,i){var o=i(8557);e["Z"]={data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{toggleFavorite(t){const e=this.favorite.findIndex((e=>e===t));-1===e?(this.favorite.push(t),this.successFire("加入收藏")):(this.favorite.splice(e,1),this.warningFire("取消收藏")),o.Z.emit("emit-favorite",this.favorite.length)}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}}}},5888:function(t,e,i){i.d(e,{Z:function(){return r}});var o={methods:{successFire(t){this.$swal({icon:"success",title:t})},warningFire(t){this.$swal({icon:"warning",title:t})},failFire(t){this.$swal({icon:"error",title:t})}}};const s=o;var r=s},8064:function(t,e,i){i.r(e),i.d(e,{default:function(){return J}});var o=i(3396),s=i(7139),r=i(9242),n=i(5378),a=i(5843),c=i(3953),l=i(4450);const d={class:"container pt-7 pt-md-8 pb-12"},u=(0,o._)("h2",{class:"text-center mb-7 mb-md-7"},"收藏夾",-1),p={class:"row justify-content-center"},g=(0,o._)("img",{class:"object-fit-cover img-h-lg mb-7",src:n,alt:"banner"},null,-1),h={class:"col-md-4"},f=(0,o._)("h4",{class:"text-center mb-6"},"還沒有添加收藏的商品喔！",-1),v=(0,o.Uk)("瀏覽商品"),m={key:1,class:"col-md-8"},_={class:"row gy-5"},b=["onClick","onKeydown"],w={class:"overlay"},k=["src"],y=(0,o._)("button",{class:"overlay-content btn btn-outline-light",type:"button"}," 更多資訊 ",-1),x={class:"card-body"},F={class:"text-truncate"},C={class:"text-primary fs-5 mb-0"},I={class:"d-flex justify-content-end"},Z=["onClick"],$={key:0,src:a,alt:"myFavorite"},H={key:1,src:c,alt:"myFavorite"},D=["onClick"];function T(t,e,i,n,a,c){const T=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",d,[u,(0,o._)("div",p,[0===a.favorite.length?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[g,(0,o._)("div",h,[f,(0,o.Wm)(T,{to:"/products",class:"d-block btn btn-green-500 text-white"},{default:(0,o.w5)((()=>[v])),_:1})])],64)):((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("div",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.products,(i=>((0,o.wg)(),(0,o.iD)("div",{class:"col-md-6",key:i.id},[(0,o._)("div",{class:(0,s.C_)(["card",{"card-hover":a.isHover,"cursor-pointer":a.isHover}]),onMouseover:e[0]||(e[0]=t=>a.isHover=!0),onFocus:e[1]||(e[1]=t=>a.isHover=!0),onClick:(0,r.iM)((t=>c.goToProduct(i.id)),["prevent"]),onKeydown:t=>c.goToProduct(i.id)},[(0,o._)("div",w,[(0,o._)("img",{class:"overlay-img object-fit-cover img-h-md",src:i.imageUrl,alt:"series1"},null,8,k),y]),(0,o._)("div",x,[(0,o._)("h5",F,(0,s.zw)(i.title),1),(0,o._)("p",C,[(0,o.wy)((0,o._)("del",{class:"d-block text-muted fs-sm"}," NT$ "+(0,s.zw)(i.origin_price),513),[[r.F8,i.origin_price!==i.price]]),(0,o.Uk)(" NT$ "+(0,s.zw)(i.price),1)]),(0,o._)("div",I,[(0,o._)("button",{class:"btn",type:"button",onClick:(0,r.iM)((t=>c.deleteFavorite(i.id)),["stop"])},[a.favorite.includes(i.id)?((0,o.wg)(),(0,o.iD)("img",$)):((0,o.wg)(),(0,o.iD)("img",H))],8,Z),(0,o._)("button",{class:(0,s.C_)(["btn",{disabled:i.id===a.loadItem}]),type:"button",onClick:(0,r.iM)((e=>t.addToCart(i.id)),["stop"])},[(0,o._)("div",{class:(0,s.C_)(["spinner-grow",{"d-none":i.id!==a.loadItem}]),role:"status"},null,2),(0,o._)("img",{class:(0,s.C_)({"d-none":i.id===a.loadItem}),src:l,alt:"cart"},null,2)],10,D)])])],42,b)])))),128))])]))])])}var P=i(2732),S=i(7824),j=i(5888),M=i(8557),N={data(){return{isHover:!1,loadItem:"",products:[],favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},mixins:[P.Z,S.Z,j.Z],methods:{getProduct(){const t=this.$loading.show();this.$http.get("https://vue3-course-api.hexschool.io/v2/api/pingfangreen/products/all").then((e=>{const i=e.data.products;this.favorite.length&&i.forEach((t=>{const e=this.favorite.findIndex((e=>t.id===e));-1!==e&&this.products.push(t)})),t.hide()})).catch((t=>{this.failFire(t.response.data.message)}))},deleteFavorite(t){this.toggleFavorite(t);const e=this.products.findIndex((e=>e.id===t));this.products.splice(e,1)},goToProduct(t){this.$router.push({path:`/product/${t}`})}},mounted(){this.getProduct(),M.Z.on("delete-favorite",(t=>{this.products.splice(t,1)}))}},O=i(89);const z=(0,O.Z)(N,[["render",T]]);var J=z},5843:function(t,e,i){t.exports=i.p+"img/favorite_black.d2efe7b7.svg"},3953:function(t,e,i){t.exports=i.p+"img/favorite_border_black.f12b99a5.svg"},4450:function(t,e,i){t.exports=i.p+"img/shopping_cart_black.084508f1.svg"},5378:function(t,e,i){t.exports=i.p+"img/oneHandPot.960b48bc.jpg"}}]);
//# sourceMappingURL=64.e7e0bf30.js.map