{"version":3,"file":"js/64.e7e0bf30.js","mappings":"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","sources":["webpack://ping-fan-green/../src/index.ts","webpack://ping-fan-green/./src/methods/emitter.js","webpack://ping-fan-green/./src/mixins/AddToCart.js","webpack://ping-fan-green/./src/mixins/ToggleFavorite.js","webpack://ping-fan-green/./src/components/SwalFire.vue","webpack://ping-fan-green/./src/components/SwalFire.vue?b26c","webpack://ping-fan-green/./src/views/forestage/FavoriteView.vue","webpack://ping-fan-green/./src/views/forestage/FavoriteView.vue?9fa1"],"sourcesContent":["export type EventType = string | symbol;\n\n// An event handler can take an optional event argument\n// and should not return a value\nexport type Handler<T = unknown> = (event: T) => void;\nexport type WildcardHandler<T = Record<string, unknown>> = (\n\ttype: keyof T,\n\tevent: T[keyof T]\n) => void;\n\n// An array of all currently registered event handlers for a type\nexport type EventHandlerList<T = unknown> = Array<Handler<T>>;\nexport type WildCardEventHandlerList<T = Record<string, unknown>> = Array<WildcardHandler<T>>;\n\n// A map of event types and their corresponding event handlers.\nexport type EventHandlerMap<Events extends Record<EventType, unknown>> = Map<\n\tkeyof Events | '*',\n\tEventHandlerList<Events[keyof Events]> | WildCardEventHandlerList<Events>\n>;\n\nexport interface Emitter<Events extends Record<EventType, unknown>> {\n\tall: EventHandlerMap<Events>;\n\n\ton<Key extends keyof Events>(type: Key, handler: Handler<Events[Key]>): void;\n\ton(type: '*', handler: WildcardHandler<Events>): void;\n\n\toff<Key extends keyof Events>(type: Key, handler?: Handler<Events[Key]>): void;\n\toff(type: '*', handler: WildcardHandler<Events>): void;\n\n\temit<Key extends keyof Events>(type: Key, event: Events[Key]): void;\n\temit<Key extends keyof Events>(type: undefined extends Events[Key] ? Key : never): void;\n}\n\n/**\n * Mitt: Tiny (~200b) functional event emitter / pubsub.\n * @name mitt\n * @returns {Mitt}\n */\nexport default function mitt<Events extends Record<EventType, unknown>>(\n\tall?: EventHandlerMap<Events>\n): Emitter<Events> {\n\ttype GenericEventHandler =\n\t\t| Handler<Events[keyof Events]>\n\t\t| WildcardHandler<Events>;\n\tall = all || new Map();\n\n\treturn {\n\n\t\t/**\n\t\t * A Map of event names to registered handler functions.\n\t\t */\n\t\tall,\n\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to listen for, or `'*'` for all events\n\t\t * @param {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton<Key extends keyof Events>(type: Key, handler: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\thandlers.push(handler);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tall!.set(type, [handler] as EventHandlerList<Events[keyof Events]>);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t * If `handler` is omitted, all handlers of the given type are removed.\n\t\t * @param {string|symbol} type Type of event to unregister `handler` from, or `'*'`\n\t\t * @param {Function} [handler] Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff<Key extends keyof Events>(type: Key, handler?: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\tif (handler) {\n\t\t\t\t\thandlers.splice(handlers.indexOf(handler) >>> 0, 1);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tall!.set(type, []);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `'*'` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * Note: Manually firing '*' handlers is not supported.\n\t\t *\n\t\t * @param {string|symbol} type The event type to invoke\n\t\t * @param {Any} [evt] Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit<Key extends keyof Events>(type: Key, evt?: Events[Key]) {\n\t\t\tlet handlers = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as EventHandlerList<Events[keyof Events]>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(evt!);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\thandlers = all!.get('*');\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as WildCardEventHandlerList<Events>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(type, evt!);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n}\n","import mitt from 'mitt';\n\nconst emitter = mitt();\n\nexport default emitter;\n","import emitter from '../methods/emitter';\n\nexport default {\n  data() {\n    return {\n      loadItem: '',\n    };\n  },\n  methods: {\n    addToCart(id, qty = 1) {\n      this.loadItem = id;\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API_BASEURL}/api/${process.env.VUE_APP_PATH}/cart`,\n          {\n            data: {\n              product_id: id,\n              qty,\n            },\n          },\n        )\n        .then((res) => {\n          this.loadItem = '';\n          emitter.emit('change-cart');\n          this.successFire(res.data.message);\n        })\n        .catch((err) => {\n          this.loadItem = '';\n          this.failFire(err.response.data.message);\n        });\n    },\n  },\n};\n","import emitter from '../methods/emitter';\n\nexport default {\n  data() {\n    return {\n      favorite: JSON.parse(localStorage.getItem('favorite')) || [],\n    };\n  },\n  methods: {\n    toggleFavorite(id) {\n      const favoriteIndex = this.favorite.findIndex((item) => item === id);\n      if (favoriteIndex === -1) {\n        this.favorite.push(id);\n        this.successFire('加入收藏');\n      } else {\n        this.favorite.splice(favoriteIndex, 1);\n        this.warningFire('取消收藏');\n      }\n      emitter.emit('emit-favorite', this.favorite.length);\n    },\n  },\n  watch: {\n    favorite: {\n      handler() {\n        localStorage.setItem('favorite', JSON.stringify(this.favorite));\n      },\n      deep: true,\n    },\n  },\n};\n","<script>\nexport default {\n  methods: {\n    successFire(message) {\n      this.$swal({\n        icon: 'success',\n        title: message,\n      });\n    },\n    warningFire(message) {\n      this.$swal({\n        icon: 'warning',\n        title: message,\n      });\n    },\n    failFire(message) {\n      this.$swal({\n        icon: 'error',\n        title: message,\n      });\n    },\n  },\n};\n</script>\n","import script from \"./SwalFire.vue?vue&type=script&lang=js\"\nexport * from \"./SwalFire.vue?vue&type=script&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"container pt-7 pt-md-8 pb-12\">\n    <h2 class=\"text-center mb-7 mb-md-7\">收藏夾</h2>\n    <div class=\"row justify-content-center\">\n      <template v-if=\"favorite.length === 0\">\n        <img\n          class=\"object-fit-cover img-h-lg mb-7\"\n          src=\"@/assets/images/oneHandPot.jpg\"\n          alt=\"banner\"\n        />\n        <div class=\"col-md-4\">\n          <h4 class=\"text-center mb-6\">還沒有添加收藏的商品喔！</h4>\n          <router-link\n            to=\"/products\"\n            class=\"d-block btn btn-green-500 text-white\"\n            >瀏覽商品</router-link\n          >\n        </div>\n      </template>\n      <template v-else>\n        <div class=\"col-md-8\">\n          <div class=\"row gy-5\">\n            <div class=\"col-md-6\" v-for=\"product in products\" :key=\"product.id\">\n              <div\n                class=\"card\"\n                :class=\"{ 'card-hover': isHover, 'cursor-pointer': isHover }\"\n                @mouseover=\"isHover = true\"\n                @focus=\"isHover = true\"\n                @click.prevent=\"goToProduct(product.id)\"\n                @keydown=\"goToProduct(product.id)\"\n              >\n                <div class=\"overlay\">\n                  <img\n                    class=\"overlay-img object-fit-cover img-h-md\"\n                    :src=\"product.imageUrl\"\n                    alt=\"series1\"\n                  />\n                  <button\n                    class=\"overlay-content btn btn-outline-light\"\n                    type=\"button\"\n                  >\n                    更多資訊\n                  </button>\n                </div>\n                <div class=\"card-body\">\n                  <h5 class=\"text-truncate\">{{ product.title }}</h5>\n                  <p class=\"text-primary fs-5 mb-0\">\n                    <del\n                      class=\"d-block text-muted fs-sm\"\n                      v-show=\"product.origin_price !== product.price\"\n                    >\n                      NT$ {{ product.origin_price }}</del\n                    >\n                    NT$ {{ product.price }}\n                  </p>\n                  <div class=\"d-flex justify-content-end\">\n                    <button class=\"btn\" type=\"button\"\n                      @click.stop=\"deleteFavorite(product.id)\">\n                      <img v-if=\"favorite.includes(product.id)\"\n                        src=\"@/assets/images/icons/favorite_black.svg\"\n                        alt=\"myFavorite\"\n                      />\n                      <img v-else\n                        src=\"@/assets/images/icons/favorite_border_black.svg\"\n                        alt=\"myFavorite\"\n                      />\n                    </button>\n                    <button\n                      class=\"btn\"\n                      :class=\"{ disabled: product.id === loadItem }\"\n                      type=\"button\"\n                      @click.stop=\"addToCart(product.id)\"\n                    >\n                      <div\n                        class=\"spinner-grow\"\n                        role=\"status\"\n                        :class=\"{ 'd-none': product.id !== loadItem }\"\n                      ></div>\n                      <img\n                        :class=\"{ 'd-none': product.id === loadItem }\"\n                        src=\"@/assets/images/icons/shopping_cart_black.svg\"\n                        alt=\"cart\"\n                      />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ToggleFavorite from '@/mixins/ToggleFavorite';\nimport AddToCart from '@/mixins/AddToCart';\nimport SwalFire from '@/components/SwalFire.vue';\nimport emitter from '@/methods/emitter';\n\nexport default {\n  data() {\n    return {\n      isHover: false,\n      loadItem: '',\n      products: [],\n      favorite: JSON.parse(localStorage.getItem('favorite')) || [],\n    };\n  },\n  mixins: [ToggleFavorite, AddToCart, SwalFire],\n  methods: {\n    getProduct() {\n      const loader = this.$loading.show();\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API_BASEURL}/api/${process.env.VUE_APP_PATH}/products/all`,\n        )\n        .then((res) => {\n          const allProducts = res.data.products;\n          if (this.favorite.length) {\n            allProducts.forEach((item) => {\n              const isFavorite = this.favorite.findIndex((id) => item.id === id);\n              if (isFavorite !== -1) {\n                this.products.push(item);\n              }\n            });\n          }\n          loader.hide();\n        })\n        .catch((err) => {\n          this.failFire(err.response.data.message);\n        });\n    },\n    deleteFavorite(id) {\n      this.toggleFavorite(id);\n      const index = this.products.findIndex((item) => item.id === id);\n      this.products.splice(index, 1);\n    },\n    goToProduct(id) {\n      this.$router.push({ path: `/product/${id}` });\n    },\n  },\n  mounted() {\n    this.getProduct();\n    emitter.on('delete-favorite', (index) => {\n      this.products.splice(index, 1);\n    });\n  },\n};\n</script>\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=548c22aa\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\s1102\\\\OneDrive\\\\桌面\\\\vue_cli\\\\ping-fan-green\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["all","Map","on","type","handler","handlers","get","push","set","off","splice","indexOf","emit","evt","slice","map","emitter","mitt","data","loadItem","methods","addToCart","id","qty","this","$http","post","product_id","then","res","successFire","message","catch","err","failFire","response","favorite","JSON","parse","localStorage","getItem","toggleFavorite","favoriteIndex","findIndex","item","warningFire","length","watch","setItem","stringify","deep","$swal","icon","title","__exports__","class","_createElementVNode","src","_imports_0","alt","_imports_1","_imports_2","_createElementBlock","_hoisted_2","$data","_Fragment","key","_hoisted_4","_hoisted_6","_createVNode","_component_router_link","to","_renderList","product","onMouseover","onFocus","onClick","$options","onKeydown","imageUrl","_hoisted_13","_toDisplayString","origin_price","price","includes","disabled","_ctx","role","_imports_3","isHover","products","mixins","ToggleFavorite","AddToCart","SwalFire","getProduct","loader","$loading","show","allProducts","forEach","isFavorite","hide","deleteFavorite","index","goToProduct","$router","path","mounted","render"],"sourceRoot":""}