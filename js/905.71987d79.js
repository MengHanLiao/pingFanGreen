"use strict";(self["webpackChunkping_fan_green"]=self["webpackChunkping_fan_green"]||[]).push([[905],{8557:function(t,e,a){function i(t){return{all:t=t||new Map,on:function(e,a){var i=t.get(e);i?i.push(a):t.set(e,[a])},off:function(e,a){var i=t.get(e);i&&(a?i.splice(i.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var i=t.get(e);i&&i.slice().map((function(t){t(a)})),(i=t.get("*"))&&i.slice().map((function(t){t(e,a)}))}}}a.d(e,{Z:function(){return n}});const o=i();var n=o},7824:function(t,e,a){var i=a(8557);e["Z"]={data(){return{loadItem:""}},methods:{addToCart(t,e=1){this.loadItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/pingfangreen/cart",{data:{product_id:t,qty:e}}).then((t=>{this.loadItem="",i.Z.emit("change-cart"),this.successFire(t.data.message)})).catch((t=>{this.loadItem="",this.failFire(t.response.data.message)}))}}}},2732:function(t,e,a){var i=a(8557);e["Z"]={data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{toggleFavorite(t){const e=this.favorite.findIndex((e=>e===t));-1===e?(this.favorite.push(t),this.successFire("加入收藏")):(this.favorite.splice(e,1),this.warningFire("取消收藏")),i.Z.emit("emit-favorite",this.favorite.length)}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}}}},2377:function(t,e,a){a.d(e,{Z:function(){return p}});var i=a(3396),o=a(7139),n=a(9242);const s={"aria-label":"Page navigation"},r={class:"pagination justify-content-center"},c=["onClick","onKeyup"];function l(t,e,a,l,d,u){return(0,i.wg)(),(0,i.iD)("nav",s,[(0,i._)("ul",r,[(0,i._)("li",{class:(0,o.C_)(["page-item",{disabled:!a.pagination.has_pre}])},[(0,i._)("a",{class:"page-link",onClick:e[0]||(e[0]=(0,n.iM)((t=>u.changePage(a.pagination.current_page-1)),["prevent"])),onKeyup:e[1]||(e[1]=(0,n.iM)((t=>u.changePage(a.pagination.current_page-1)),["prevent"]))},"上一頁",32)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pagination.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,o.C_)(["page-item",{active:a.pagination.current_page===t}]),key:t+"dadfsd"},[(0,i._)("a",{class:"page-link",onClick:(0,n.iM)((e=>u.changePage(t)),["prevent"]),onKeyup:(0,n.iM)((e=>u.changePage(t)),["prevent"])},(0,o.zw)(t),41,c)],2)))),128)),(0,i._)("li",{class:(0,o.C_)(["page-item",{disabled:!a.pagination.has_next}])},[(0,i._)("a",{class:"page-link",onClick:e[2]||(e[2]=(0,n.iM)((t=>u.changePage(a.pagination.current_page+1)),["prevent"])),onKeyup:e[3]||(e[3]=(0,n.iM)((t=>u.changePage(a.pagination.current_page+1)),["prevent"]))},"下一頁",32)],2)])])}var d={props:["pagination"],methods:{changePage(t){this.$emit("change-page",t)}}},u=a(89);const g=(0,u.Z)(d,[["render",l]]);var p=g},5888:function(t,e,a){a.d(e,{Z:function(){return n}});var i={methods:{successFire(t){this.$swal({icon:"success",title:t})},warningFire(t){this.$swal({icon:"warning",title:t})},failFire(t){this.$swal({icon:"error",title:t})}}};const o=i;var n=o},179:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(3396),o=a(7139);const n={class:"nav flex-column"};function s(t,e,a,s,r,c){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("ul",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.categories,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{class:"nav-item",key:e+"dasdf"},[(0,i.Wm)(l,{to:`/products/${t}`,onClick:c.hideOffcanvas,class:"nav-link ps-0"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t),1)])),_:2},1032,["to","onClick"])])))),128))])}var r={data(){return{categories:[]}},props:{canHide:{type:Boolean,default:!1}},methods:{getCategory(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/pingfangreen/products/all").then((t=>{const e=[...t.data.products];e.forEach((t=>{const e=this.categories.some((e=>e===t.category));e||this.categories.push(t.category)}))})).catch((t=>{console.dir(t)}))},hideOffcanvas(){this.canHide&&this.$emit("emit-hide")}},mounted(){this.getCategory()}},c=a(89);const l=(0,c.Z)(r,[["render",s]]);var d=l},9905:function(t,e,a){a.r(e),a.d(e,{default:function(){return X}});var i=a(3396),o=a(9242),n=a(7139),s=a(161),r=a(5843),c=a(3953),l=a(4450);const d={class:"container pt-7 pt-md-8 pb-12"},u=(0,i._)("h2",{class:"text-center mb-7 mb-md-7"},"商品專區",-1),g={class:"row"},p={class:"col-lg-3 d-none d-lg-block"},h=(0,i._)("h5",null,"商品分類",-1),m={class:"col-lg-9"},v={class:"row"},f={class:"col-md-6","aria-label":"breadcrumb"},_={class:"col-md-5 offset-md-1"},w={class:"input-group mb-3"},b=(0,i._)("img",{src:s,alt:"find"},null,-1),k=[b],y={class:"row row-cols-2 row-cols-lg-4 gy-4 mb-7"},C=["onClick","onKeydown"],$=["src"],P=(0,i._)("button",{class:"overlay-content btn btn-outline-light",type:"button"}," 更多資訊 ",-1),D={class:"card-body"},x={class:"text-truncate"},Z={class:"text-primary fs-5 mb-0"},F={class:"d-flex justify-content-end"},H=["onClick"],M={key:0,src:r,alt:"myFavorite"},I={key:1,src:c,alt:"myFavorite"},K=["onClick"],T={key:1,class:"fs-4 me-5"},U=(0,i.Uk)("目前沒有符合的品名或類別"),z=(0,i._)("br",null,null,-1),S=(0,i.Uk)(" 請重新輸入關鍵字"),B=[U,z,S];function L(t,e,a,s,r,c){const b=(0,i.up)("ProductSidenav"),U=(0,i.up)("Breadcrumb"),z=(0,i.up)("PaginationComponent");return(0,i.wg)(),(0,i.iD)("div",d,[u,(0,i._)("div",g,[(0,i._)("div",p,[h,(0,i.Wm)(b)]),(0,i._)("div",m,[(0,i._)("div",v,[(0,i._)("nav",f,[(0,i.Wm)(U)]),(0,i._)("div",_,[(0,i._)("div",w,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control border-green-500",placeholder:"搜尋商品或類別","aria-label":"商品搜尋","aria-describedby":"商品搜尋","onUpdate:modelValue":e[0]||(e[0]=t=>r.keyword=t),onChange:e[1]||(e[1]=(...t)=>c.searchProduct&&c.searchProduct(...t))},null,544),[[o.nr,r.keyword,void 0,{trim:!0}]]),(0,i._)("button",{class:"btn btn-outline-green-500",type:"button",onClick:e[2]||(e[2]=(...t)=>c.searchProduct&&c.searchProduct(...t))},k)])])]),0!==r.products.length?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("div",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.products,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:a.id},[(0,i._)("div",{class:(0,n.C_)(["card",{"card-hover":r.isHover,"cursor-pointer":r.isHover}]),onMouseover:e[3]||(e[3]=t=>r.isHover=!0),onFocus:e[4]||(e[4]=t=>r.isHover=!0),onClick:(0,o.iM)((t=>c.goToProduct(a.id)),["prevent"]),onKeydown:t=>c.goToProduct(a.id)},[(0,i._)("div",{class:(0,n.C_)(["overlay",{hover:r.isHover}])},[(0,i._)("img",{class:"overlay-img object-fit-cover img-h-sm",src:a.imageUrl,alt:"series1"},null,8,$),P],2),(0,i._)("div",D,[(0,i._)("h5",x,(0,n.zw)(a.title),1),(0,i._)("p",Z,[(0,i.wy)((0,i._)("del",{class:"d-block text-muted fs-sm"}," NT$ "+(0,n.zw)(a.origin_price),513),[[o.F8,a.origin_price!==a.price]]),(0,i.Uk)(" NT$ "+(0,n.zw)(a.price),1)]),(0,i._)("div",F,[(0,i._)("button",{class:"btn",type:"button",onClick:(0,o.iM)((e=>t.toggleFavorite(a.id)),["stop"])},[t.favorite.includes(a.id)?((0,i.wg)(),(0,i.iD)("img",M)):((0,i.wg)(),(0,i.iD)("img",I))],8,H),(0,i._)("button",{class:(0,n.C_)(["btn",{disabled:a.id===t.loadItem}]),type:"button",onClick:(0,o.iM)((e=>t.addToCart(a.id)),["stop"])},[(0,i._)("div",{class:(0,n.C_)(["spinner-grow",{"d-none":a.id!==t.loadItem}]),role:"status"},null,2),(0,i._)("img",{class:(0,n.C_)({"d-none":a.id===t.loadItem}),src:l,alt:"cart"},null,2)],10,K)])])],42,C)])))),128))]),(0,i.Wm)(z,{pagination:r.pagination,onChangePage:c.getData},null,8,["pagination","onChangePage"])],64)):((0,i.wg)(),(0,i.iD)("p",T,B))])])])}const O={class:"breadcrumb"};function W(t,e,a,o,s,r){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("ol",O,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.routeList,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"breadcrumb-item",key:t.name},[(0,i.Wm)(c,{to:t.link},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.name),1)])),_:2},1032,["to"])])))),128))])}var Y={data(){return{routeList:[{name:"全部商品",link:"/products"}]}},watch:{$route(){this.getBreadcrumb()}},methods:{getBreadcrumb(){1!==this.routeList.length&&this.routeList.pop(),this.routeList.push({name:this.$route.params.category,link:this.$route.fullPath})}}},N=a(89);const j=(0,N.Z)(Y,[["render",W]]);var J=j,q=a(179),E=a(2732),V=a(7824),A=a(2377),G=a(5888),Q={data(){return{isHover:!1,products:[],pagination:[],keyword:""}},props:["category"],mixins:[G.Z,E.Z,V.Z],components:{Breadcrumb:J,ProductSidenav:q.Z,PaginationComponent:A.Z},methods:{getData(t=1,e=""){const a=this.$loading.show();this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/pingfangreen/products?page=${t}&category=${e}`).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,a.hide()})).catch((t=>{console.dir(t)}))},searchProduct(){let t=[];const e=this.$loading.show();this.$http.get("https://vue3-course-api.hexschool.io/v2/api/pingfangreen/products/all").then((a=>{t=a.data.products,this.products=t.filter((t=>t.title.match(this.keyword)||t.category.match(this.keyword))),console.log(this.pagination),this.pagination={current_page:1,total_pages:1},e.hide(),this.keyword=""})).catch((t=>{console.dir(t)}))},goToProduct(t){this.$router.push({path:`/product/${t}`})}},watch:{$route(){this.getData(1,this.$route.params.category)}},mounted(){const t=this.$route.params.category||"";this.getData(1,t)}};const R=(0,N.Z)(Q,[["render",L]]);var X=R},5843:function(t,e,a){t.exports=a.p+"img/favorite_black.d2efe7b7.svg"},3953:function(t,e,a){t.exports=a.p+"img/favorite_border_black.f12b99a5.svg"},161:function(t,e,a){t.exports=a.p+"img/search_black.aed70011.svg"},4450:function(t,e,a){t.exports=a.p+"img/shopping_cart_black.084508f1.svg"}}]);
//# sourceMappingURL=905.71987d79.js.map